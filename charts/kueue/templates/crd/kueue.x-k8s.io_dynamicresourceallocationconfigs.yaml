{{/* Code generated by yaml-processor. DO NOT EDIT. */}}

apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  labels:
  {{- include "kueue.labels" . | nindent 4 }}
  annotations:
    {{- if .Values.enableCertManager }}
    cert-manager.io/inject-ca-from: '{{ .Release.Namespace }}/{{ include "kueue.fullname" . }}-serving-cert'
    {{- end }}
    controller-gen.kubebuilder.io/version: v0.18.0
  name: dynamicresourceallocationconfigs.kueue.x-k8s.io
spec:
  conversion:
    strategy: Webhook
    webhook:
      clientConfig:
        service:
          name: '{{ include "kueue.fullname" . }}-webhook-service'
          namespace: '{{ .Release.Namespace }}'
          path: /convert
      conversionReviewVersions:
        - v1
  group: kueue.x-k8s.io
  names:
    kind: DynamicResourceAllocationConfig
    listKind: DynamicResourceAllocationConfigList
    plural: dynamicresourceallocationconfigs
    singular: dynamicresourceallocationconfig
  scope: Cluster
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          description: |-
            DynamicResourceAllocationConfig is a singleton CRD that maps a logical resource name to one or more DeviceClasses
            in the cluster. Only one instance named "default" in the configured namespace
            is allowed.
          properties:
            apiVersion:
              description: |-
                APIVersion defines the versioned schema of this representation of an object.
                Servers should convert recognized schemas to the latest internal value, and
                may reject unrecognized values.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
              type: string
            kind:
              description: |-
                Kind is a string value representing the REST resource this object represents.
                Servers may infer this from the endpoint the client submits requests to.
                Cannot be updated.
                In CamelCase.
                More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
              type: string
            metadata:
              type: object
            spec:
              description: DynamicResourceAllocationConfigSpec holds all resource to DeviceClass mappings.
              properties:
                resources:
                  description: Resources lists logical resources that Kueue will account.
                  items:
                    description: |-
                      DynamicResource describes a single logical resource and the DeviceClasses mapping. The resource name is used
                      to quota in ClusterQueue.
                    properties:
                      deviceClassNames:
                        description: |-
                          DeviceClassNames enumerates the DeviceClasses represented by this resource name.
                          Each device class name must be a valid qualified name consisting of an optional DNS subdomain prefix
                          followed by a slash and a DNS label, or just a DNS label.
                          DNS labels consist of lower-case alphanumeric characters or hyphens,
                          and must start and end with an alphanumeric character.
                          DNS subdomain prefixes follow the same rules as DNS labels but can contain periods.
                          The total length of each name must not exceed 253 characters.
                        items:
                          description: ResourceName is the name identifying various resources in a ResourceList.
                          type: string
                        maxItems: 8
                        minItems: 1
                        type: array
                        x-kubernetes-list-type: set
                      name:
                        description: ResourceName is the name identifying various resources in a ResourceList.
                        type: string
                    required:
                      - deviceClassNames
                      - name
                    type: object
                  maxItems: 16
                  minItems: 1
                  type: array
                  x-kubernetes-list-map-keys:
                    - name
                  x-kubernetes-list-type: map
              required:
                - resources
              type: object
          required:
            - spec
          type: object
      served: true
      storage: true
