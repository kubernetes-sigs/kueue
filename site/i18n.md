🌐 Kueue Documentation Internationalization Architecture

Designing multilingual capabilities with Chinese support and scalable contributor workflow

📋 Executive Summary

Objective

Transform Kueue's Hugo-based documentation site to support multiple languages, starting with Chinese
(zh-CN), while establishing a contributor-friendly internationalization framework.

Scope

- Hugo i18n infrastructure implementation
- Chinese language integration
- Scalable translation management system
- Contributor workflow optimization

---
🏗️ System Architecture

1. Hugo Internationalization Framework

# hugo.toml - Enhanced Configuration
defaultContentLanguage = "en"
defaultContentLanguageInSubdir = true

[languages]
[languages.en]
    title = "Kueue"
    languageName = "English"
    weight = 1
    contentDir = "content/en"
    [languages.en.params]
    language_code = "en-US"

[languages.zh]
    title = "Kueue"
    languageName = "中文"
    weight = 2
    contentDir = "content/zh"
    [languages.zh.params]
    language_code = "zh-CN"

[markup]
[markup.goldmark]
    [markup.goldmark.renderer]
    unsafe = true  # For HTML in markdown (needed for some CJK content)

2. Directory Structure Redesign

site/
├── content/
│   ├── en/                    # English (existing)
│   │   ├── docs/
│   │   ├── _index.html
│   │   └── search.md
│   └── zh/                    # Chinese (new)
│       ├── docs/
│       │   ├── _index.md
│       │   ├── concepts/
│       │   ├── tasks/
│       │   ├── reference/
│       │   └── ...
│       ├── _index.html
│       └── search.md
├── i18n/                      # UI Translation Files
│   ├── en.yaml
│   ├── zh.yaml
│   └── [future languages].yaml
├── layouts/
│   ├── partials/
│   │   ├── language-switcher.html  # New component
│   │   ├── navbar.html            # Updated
│   │   └── head.html              # Updated for SEO
│   └── ...
└── static/
    └── examples/              # Shared across languages

3. Translation Management System

UI Strings Framework (i18n/)

# i18n/en.yaml
- id: nav_docs
translation: "Documentation"
- id: nav_concepts
translation: "Concepts"
- id: nav_tasks
translation: "Tasks"
- id: nav_reference
translation: "Reference"
- id: search_placeholder
translation: "Search documentation..."
- id: edit_page
translation: "Edit this page"
- id: last_modified
translation: "Last modified"
- id: language_switch
translation: "Language"

# i18n/zh.yaml
- id: nav_docs
translation: "文档"
- id: nav_concepts
translation: "概念"
- id: nav_tasks
translation: "任务"
- id: nav_reference
translation: "参考"
- id: search_placeholder
translation: "搜索文档..."
- id: edit_page
translation: "编辑此页"
- id: last_modified
translation: "最后修改"
- id: language_switch
translation: "语言"

Content Translation Strategy

# Priority-Based Translation Phases

## Phase 1: Essential Content (Week 1-2)
- content/zh/_index.html
- content/zh/docs/_index.md
- content/zh/docs/overview/_index.md
- content/zh/docs/installation/_index.md

## Phase 2: Core Concepts (Week 3-4)
- content/zh/docs/concepts/cluster_queue.md
- content/zh/docs/concepts/local_queue.md
- content/zh/docs/concepts/workload.md
- content/zh/docs/concepts/resource_flavor.md

## Phase 3: Getting Started Tasks (Week 5-6)
- content/zh/docs/tasks/run/jobs.md
- content/zh/docs/tasks/manage/administer_cluster_quotas.md

## Phase 4: Advanced Features (Ongoing)
- Remaining concepts, tasks, and reference materials

---
🔧 Implementation Components

1. Language Switcher Component

<!-- layouts/partials/language-switcher.html -->
{{ if .Site.IsMultiLingual }}
<div class="language-switcher dropdown">
<button class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown">
    <i class="fa fa-globe"></i>
    {{ .Site.Language.LanguageName }}
    <span class="caret"></span>
</button>
<ul class="dropdown-menu">
    {{ range .Site.Languages }}
    {{ if ne .Lang $.Site.Language.Lang }}
        <li>
        <a href="{{ $.Permalink | relLangURL .Lang }}" lang="{{ .Lang }}">
            {{ .LanguageName }}
        </a>
        </li>
    {{ end }}
    {{ end }}
</ul>
</div>
{{ end }}

2. Enhanced Navigation Template

<!-- layouts/partials/navbar.html (Updated) -->
<nav class="navbar">
<div class="container">
    <div class="navbar-brand">
    <a href="{{ .Site.BaseURL }}">
        <img src="/images/logo.svg" alt="Kueue">
    </a>
    </div>

    <ul class="navbar-nav">
    <li><a href="{{ relref . "/docs" }}">{{ i18n "nav_docs" }}</a></li>
    <li><a href="{{ relref . "/docs/concepts" }}">{{ i18n "nav_concepts" }}</a></li>
    <li><a href="{{ relref . "/docs/tasks" }}">{{ i18n "nav_tasks" }}</a></li>
    <li><a href="{{ relref . "/docs/reference" }}">{{ i18n "nav_reference" }}</a></li>
    </ul>

    <div class="navbar-right">
    {{ partial "language-switcher.html" . }}
    <a href="{{ .Site.Params.github_repo }}" class="btn btn-github">
        <i class="fab fa-github"></i> GitHub
    </a>
    </div>
</div>
</nav>

3. SEO and Meta Enhancement

<!-- layouts/partials/head.html (Updated) -->
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Language and SEO -->
<html lang="{{ .Site.Language.Lang }}">
<link rel="canonical" href="{{ .Permalink }}">

{{ range .AllTranslations }}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}">
{{ end }}

<!-- CJK Font Optimization for Chinese -->
{{ if eq .Site.Language.Lang "zh" }}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap"
rel="stylesheet">
{{ end }}

<title>{{ .Title }} | {{ .Site.Title }}</title>
</head>

---
🔄 Translation Workflow & Contributor Framework

1. Contributor Onboarding

# Translation Contribution Guide

## Quick Start for Translators

### Prerequisites
- GitHub account
- Basic markdown knowledge
- Familiarity with Kueue concepts

### Setup Process
1. Fork the repository
2. Clone locally: `git clone https://github.com/YOUR_USERNAME/kueue.git`
3. Create language branch: `git checkout -b add-[lang]-translation`
4. Follow the translation guidelines below

### File Structure
- Content files: `site/content/[lang]/`
- UI strings: `site/i18n/[lang].yaml`
- Examples: Share `site/static/examples/` (add language-specific when needed)

2. Translation Automation Tools

Translation Status Tracking

# tools/translation-status.py
#!/usr/bin/env python3
"""Track translation completeness across languages."""

import os
import yaml
from pathlib import Path

class TranslationTracker:
    def __init__(self, site_dir):
        self.site_dir = Path(site_dir)
        self.en_content = self.site_dir / "content" / "en"

    def scan_completeness(self, target_lang):
        """Generate translation completeness report."""
        results = {
            'completed': [],
            'missing': [],
            'outdated': []
        }

        for en_file in self.en_content.rglob("*.md"):
            rel_path = en_file.relative_to(self.en_content)
            target_file = self.site_dir / "content" / target_lang / rel_path

            if target_file.exists():
                if self.is_outdated(en_file, target_file):
                    results['outdated'].append(str(rel_path))
                else:
                    results['completed'].append(str(rel_path))
            else:
                results['missing'].append(str(rel_path))

        return results

    def generate_report(self, target_lang):
        """Generate markdown report for contributors."""
        data = self.scan_completeness(target_lang)

        report = f"""# Translation Status: {target_lang.upper()}

## Summary
- ✅ Completed: {len(data['completed'])} files
- ❌ Missing: {len(data['missing'])} files
- ⚠️ Outdated: {len(data['outdated'])} files

## Priority Translation Targets
"""

        for missing in sorted(data['missing'][:10]):  # Top 10 priority
            report += f"- [ ] `{missing}`\n"

        return report

if __name__ == "__main__":
    tracker = TranslationTracker("site")
    print(tracker.generate_report("zh"))

Translation Validation Script

#!/bin/bash
# tools/validate-translation.sh

set -e

LANG_CODE=$1
if [ -z "$LANG_CODE" ]; then
    echo "Usage: $0 <language_code>"
    echo "Example: $0 zh"
    exit 1
fi

echo "🔍 Validating $LANG_CODE translation..."

# Check required files exist
REQUIRED_FILES=(
    "content/$LANG_CODE/_index.html"
    "content/$LANG_CODE/docs/_index.md"
    "i18n/$LANG_CODE.yaml"
)

for file in "${REQUIRED_FILES[@]}"; do
    if [ ! -f "site/$file" ]; then
        echo "❌ Missing required file: $file"
        exit 1
    fi
done

# Validate i18n completeness
echo "📝 Checking UI string completeness..."
python3 tools/check-i18n-completeness.py en $LANG_CODE

# Test Hugo build
echo "🏗️ Testing Hugo build..."
cd site && hugo --minify --environment production --destination ../dist-test-$LANG_CODE

echo "✅ Translation validation passed for $LANG_CODE"

3. Automated Translation Workflow

GitHub Actions Integration

# .github/workflows/translation-check.yml
name: Translation Validation

on:
pull_request:
    paths:
    - 'site/content/**'
    - 'site/i18n/**'

jobs:
validate-translations:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
        hugo-version: '0.120.0'
        extended: true

    - name: Detect changed languages
        id: detect-langs
        run: |
        CHANGED_LANGS=$(git diff --name-only HEAD~1 | grep '^site/content/' | cut -d'/' -f3 | sort -u)
        echo "languages=${CHANGED_LANGS}" >> $GITHUB_OUTPUT

    - name: Validate each language
        run: |
        for lang in ${{ steps.detect-langs.outputs.languages }}; do
            if [ "$lang" != "en" ]; then
            echo "Validating language: $lang"
            ./tools/validate-translation.sh $lang
            fi
        done

    - name: Check translation completeness
        run: |
        python3 tools/translation-status.py > translation-report.md

    - name: Comment PR with status
        uses: actions/github-script@v6
        with:
        script: |
            const fs = require('fs');
            const report = fs.readFileSync('translation-report.md', 'utf8');
            github.rest.issues.createComment({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: `## Translation Status Report\n\n${report}`
            });

---
📊 Implementation Roadmap

Phase 1: Infrastructure Setup (Week 1)

gantt
    title Kueue i18n Implementation Timeline
    dateFormat  YYYY-MM-DD
    section Infrastructure
    Hugo i18n config           :done, config, 2024-01-01, 2d
    Directory restructure      :done, structure, after config, 2d
    Language switcher         :active, switcher, after structure, 3d

    section Chinese Translation
    Priority content          :content1, after switcher, 1w
    Core concepts            :content2, after content1, 1w
    Getting started          :content3, after content2, 1w

    section Contributor Tools
    Translation scripts      :tools, after switcher, 5d
    GitHub Actions          :ci, after tools, 3d
    Documentation          :docs, after ci, 2d

Phase 2: Chinese Content (Week 2-6)

Week 2-3: Essential Pages
- Landing page and overview
- Installation guide
- Basic getting started

Week 4-5: Core Concepts
- ClusterQueue, LocalQueue, Workload
- Resource management concepts
- Basic scheduling concepts

Week 6: User Tasks
- Running basic jobs
- Queue management
- Troubleshooting guides

Phase 3: Contributor Framework (Week 7-8)

Translation Tools
- Status tracking scripts
- Validation automation
- Contributor guidelines

Community Integration
- Translation contributor onboarding
- Review process establishment
- Community translation coordination

---
🎯 Success Metrics & Monitoring

Technical Metrics

- Translation Coverage: Target 80% for Chinese by end of Phase 2
- Build Performance: <2s additional build time for multilingual site
- SEO Performance: Proper language detection and indexing

Community Metrics

- Contributor Onboarding: <30min setup time for new translators
- Translation Quality: Community review process for accuracy
- Maintenance Overhead: <5% additional maintenance burden

User Experience Metrics

- Language Detection: Automatic browser language preference detection
- Navigation Consistency: Identical UX across all language versions
- Content Freshness: <1 week lag for critical content translation

---
🚀 Future Language Expansion

Scalable Framework Design

The architecture supports easy addition of new languages:

1. Add language configuration to hugo.toml
2. Create content directory content/[lang]/
3. Add UI translations i18n/[lang].yaml
4. Run validation scripts for completeness check

Community-Driven Growth

- Self-service onboarding for language contributors
- Automated validation reduces maintenance overhead
- Modular translation allows incremental progress
- Quality assurance through automated and community review

This architecture establishes Kueue as a truly global project with sustainable, community-driven
internationalization capabilities.