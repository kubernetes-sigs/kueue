kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
  - role: control-plane
    kubeadmConfigPatchesJSON6902:
      - group: kubeadm.k8s.io
        version: v1beta4
        kind: ClusterConfiguration
        patch: |
          - op: add
            path: /apiServer/extraArgs
            value:
            - name: enable-aggregator-routing
              value: "true"
            - name: v
              value: "3"
          - op: add
            path: /scheduler/extraArgs
            value:
            - name: v
              value: "3"
          - op: add
            path: /controllerManager/extraArgs
            value:
            - name: v
              value: "3"
      - group: kubeadm.k8s.io
        version: v1beta4
        kind: InitConfiguration
        patch: |
          - op: add
            path: /nodeRegistration/kubeletExtraArgs
            value:
            - name: v
              value: "3"

  - role: worker
    labels:
      instance-type: on-demand
      cloud.provider.com/node-group: tas-node

kubeadmConfigPatchesJSON6902:
  - group: kubeadm.k8s.io
    version: v1beta4
    kind: JoinConfiguration
    patch: |
      - op: add
        path: /nodeRegistration/kubeletExtraArgs
        value:
        - name: v
          value: "3"