---
apiVersion: batch/v1
kind: Job
metadata:
  namespace: gpu-test2
  name: ts-pending-slice-job
  labels:
    app: job
    kueue.x-k8s.io/queue-name: shared-gpus-user-queue
spec:
  template:
    spec:
      restartPolicy: Never
      containers:
        - name: ts-ctr0
          image: ubuntu:22.04
          command: [ "bash", "-c" ]
          args: [ "export; trap 'exit 0' TERM; sleep 9999 & wait" ]
          resources:
            claims:
              - name: shared-ts-gpu
                request: ts-gpu
        - name: ts-ctr1
          image: ubuntu:22.04
          command: [ "bash", "-c" ]
          args: [ "export; trap 'exit 0' TERM; sleep 9999 & wait" ]
          resources:
            claims:
              - name: shared-ts-gpu
                request: ts-gpu
      resourceClaims:
        - name: shared-ts-gpu
          resourceClaimTemplateName: ts-shared-gpu
---
apiVersion: batch/v1
kind: Job
metadata:
  namespace: gpu-test2
  name: sp-pending-slice-job
  labels:
    app: job
    kueue.x-k8s.io/queue-name: shared-gpus-user-queue
spec:
  template:
    spec:
      restartPolicy: Never
      containers:
        - name: sp-ctr0
          image: ubuntu:22.04
          command: [ "bash", "-c" ]
          args: [ "export; trap 'exit 0' TERM; sleep 9999 & wait" ]
          resources:
            claims:
              - name: shared-sp-gpu
                request: sp-gpu
        - name: sp-ctr1
          image: ubuntu:22.04
          command: [ "bash", "-c" ]
          args: [ "export; trap 'exit 0' TERM; sleep 9999 & wait" ]
          resources:
            claims:
              - name: shared-sp-gpu
                request: sp-gpu
      resourceClaims:
        - name: shared-sp-gpu
          resourceClaimTemplateName: sp-shared-gpu
---